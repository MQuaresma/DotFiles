" Check if the plugin manager is installed
if empty(glob('~/.vim/autoload/plug.vim'))
  silent !curl -fLo ~/.vim/autoload/plug.vim --create-dirs
    \ https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
  autocmd VimEnter * PlugInstall --sync | source $MYVIMRC
endif

""""""""""""""Plugin manager"""""""""""""""
call plug#begin()

" Files
Plug 'scrooloose/nerdtree'
Plug '/usr/local/opt/fzf'
Plug 'junegunn/fzf.vim'
" Tab and Brace Completion
Plug 'ervandew/supertab'
Plug 'jiangmiao/auto-pairs'
" Status line
Plug 'itchyny/lightline.vim'
" Linter
Plug 'w0rp/ale'
" Color scheme
Plug 'tomasiser/vim-code-dark'
" Syntax highlighting enhancers
Plug 'pangloss/vim-javascript'
Plug 'leafgarland/typescript-vim'

call plug#end()
filetype plugin indent on
"""""""""""""""""""""""""""""""""""""""""""""""""""


"Lightline
let g:lightline = {
      \ 'colorscheme': 'material',
      \ }

"Bind <C-o> to NERDTree
map <C-o> :NERDTreeToggle<CR>
autocmd bufenter * if (winnr("$") == 1 && exists("b:NERDTree") && b:NERDTree.isTabTree()) | q | endif
let NERDTreeShowHidden=1

"Bind <C-p> to fzf
map <C-p> :Files<CR>

"Disable arrow-keys
map <up> <nop>
map <down> <nop>
map <left> <nop>
map <right> <nop>
imap <right> <nop>
imap <left> <nop>
imap <up> <nop>
imap <down> <nop>

"Map j+k k+j to go back to command mode
inoremap jk <ESC>
inoremap kj <ESC>

"Map Ctrl+key to move between windows
map <C-j> <C-W>j
map <C-k> <C-W>k
map <C-h> <C-W>h
map <C-l> <C-W>l

" Remap 0 to first non-blank character
map 0 ^

"Treat long lines as break lines
map j gj
map k gk

" Keep selection after index
vnoremap < <gv
vnoremap > >gv

"Color related configs
colorscheme codedark
set background=dark
syntax enable                   
set number
" Disable start screen
set shortmess+=aAIsT
set laststatus=2
set cursorline

"Search options
set ignorecase  "Ignore case when searching
set incsearch   "Instant search

"Command listing
set wildmenu
set path+=**

"Turn most backup options off
set nobackup
set nowb
set noswapfile

"Update file when modified outside of vim
set autoread

set ttyfast

" move lines up and down
nnoremap <C-j> :m .+1<CR>==
nnoremap <C-k> :m .-2<CR>==
inoremap <C-j> <Esc>:m .+1<CR>==gi
inoremap <C-k> <Esc>:m .-2<CR>==gi
vnoremap <C-j> :m '>+1<CR>gv=gv
vnoremap <C-k> :m '<-2<CR>gv=gv

"Be smart when using tabs ;)
set smarttab

"1 tab = 4 spaces
set shiftwidth=4
set tabstop=4
set expandtab " tab to spaces


set ai "Auto indent
set si "Smart indent

set lazyredraw "Keeps vim from redrawing the window so often

set mat=2
set encoding=utf-8
set showmatch
set nocompatible
